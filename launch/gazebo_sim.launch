<?xml version="1.0"?>

<launch>

  <!-- Load Parameters -->
  <rosparam command="load" file="$(find ogm_ae)/config/maps_gazebo.yaml"   />
  <rosparam command="load" file="$(find ogm_ae)/config/exploration.yaml"   />
  <rosparam command="load" file="$(find ogm_ae)/config/depth_sensors.yaml" />

  <!-- Simulation Time True -->
  <param name="use_sim_time" value="true" />
  <param name="run_autonomous_exploration"  value="true"      />
  <param name="exploration/simulate_gazebo" value="true"      />
  <param name="exploration/robot_frame"     value="quadrotor1/base_link" />

  <!-- Start Gazebo with 'simple_world' Environment -->
  <include file="$(find fdcl_test)/launch/start.launch">
    <!-- arg name="world" value="worlds/empty.world"/ -->
    <arg name="world" value="$(find fdcl_test)/worlds/lasr_no_quad.world"/>
  </include>

  <!-- Spawn simulated quadrotor uavs -->
  <arg name="model" default="$(find fdcl_test)/robot_description/urdf/quad_with_laser_and_rgbd.xacro" />
  <group ns="quadrotor1">
  <include file="$(find fdcl_test)/launch/spawn_quadrotor.launch" >
    <arg name="name" value="quadrotor1"/>
    <arg name="model" value="$(arg model)"/>
    <arg name="x" value="1"/>
    <arg name="y" value="0"/>
    <arg name="z" value="0.3"/>
  </include>
  </group>
  <group ns="quadrotor2">
  <include file="$(find fdcl_test)/launch/spawn_quadrotor.launch" >
    <arg name="name" value="quadrotor2"/>
    <arg name="model" value="$(arg model)"/>
    <arg name="x" value="-1"/>
    <arg name="y" value="0"/>
    <arg name="z" value="0.3"/>
  </include>
  </group>


  <!-- Projected 2D Maps -->
  <node pkg="ogm_ae" name="generate_exploration_collision_entropy_comb_map"   type="generate_exploration_map" output="screen">
    <param name="map_goal" value="collision"/>
  </node>
  <!-- node pkg="ogm_ae" name="generate_exploration_map_entropy"   type="generate_exploration_map" output="screen">
    <param name="map_goal" value="entropy"  />
  </node>
  <node pkg="ogm_ae" name="generate_exploration_map_collision" type="generate_exploration_map" output="screen">
    <param name="map_goal" value="collision"/>
  </node -->

  <!-- Set Robot Model States -->
  <node pkg="ogm_ae" name="paths_to_cmd_1" type="paths_to_cmd" output="screen">
    <param name="model_name"   value="quadrotor1"                         />
    <param name="robot_frame"  value="quadrotor1/base_link"               />
    <param name="sensor_frame" value="quadrotor1/camera_rgb_optical_frame"/>
  </node>
  <node pkg="ogm_ae" name="paths_to_cmd_2" type="paths_to_cmd" output="screen">
    <param name="model_name"   value="quadrotor2"                         />
    <param name="robot_frame"  value="quadrotor2/base_link"               />
    <param name="sensor_frame" value="quadrotor2/camera_rgb_optical_frame"/>
  </node>
</launch>
